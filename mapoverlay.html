async function getRandomLocation() {
  try {
    const username = await getVariable("displayname");
    const response = await fetch("https://fortnite-api.com/v1/map");
    const data = await response.json();
    const locations = data.data.pois.map((poi) => poi.name);
    const randomLocation = locations[Math.floor(Math.random() * locations.length)];

    const cleanName = randomLocation.replace(/\s*\(.*?\)/, "").trim();

    console.log(`${username} says ${randomLocation} is your next drop! üèÜ`);

    tts({
      message: `${username} wants you to land at ${randomLocation}!`,
      voice: "Brian",
      volume: 60,
    });

    chatbot({
      message: `${username} wants you to land at ${randomLocation}!`,
      site: ["twitch", "youtube"],
      chatAsSelf: true,
    });

    overlaySetTextContent({
      layer: "location",
      content: `${username} say drop at ${randomLocation}!`,
    });

    await setVariable({ name: "location", value: randomLocation });

    overlaySetLayerVisibility({ layer: "location", on: true });
    overlaySetLayerVisibility({ layer: "map1", on: true });
    overlaySetLayerVisibility({ layer: "mapaddress", on: true });

    overlaySendMessage({
      type: "setLocation",
      location: cleanName,
    });

    await delay(8000);

    overlaySetLayerVisibility({ layer: "location", on: false });
    overlaySetLayerVisibility({ layer: "map1", on: false });
    overlaySetLayerVisibility({ layer: "mapaddress", on: false });

    done();
    return randomLocation;
  } catch (error) {
    console.error("Error fetching random location:", error);
    done();
    return null;
  }
}
